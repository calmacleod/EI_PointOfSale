<% if results.any? %>
  <ul class="divide-y divide-[var(--color-border)]">
    <% results.each do |item| %>
      <% already_added = discount_item_ids.include?(item.id) %>
      <li class="flex items-center justify-between px-3 py-2 text-sm">
        <div>
          <span class="font-medium text-body"><%= item.name %></span>
          <% if item.respond_to?(:code) %>
            <span class="ml-1.5 font-mono text-xs text-muted"><%= item.code %></span>
          <% end %>
        </div>
        <% if already_added %>
          <span class="text-xs text-muted italic">Added</span>
        <% else %>
          <%= button_to admin_discount_discount_items_path(discount),
              params: { discountable_type: item_type, discountable_id: item.id },
              data: { turbo_stream: true },
              class: "inline-flex items-center gap-1 rounded-md bg-accent px-2 py-1 text-xs font-medium text-[color:var(--color-page)] hover:bg-[var(--color-accent-hover)]" do %>
            <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
            </svg>
            Add
          <% end %>
        <% end %>
      </li>
    <% end %>
  </ul>
<% elsif defined?(results) %>
  <p class="px-3 py-3 text-sm text-muted">No results found.</p>
<% end %>
