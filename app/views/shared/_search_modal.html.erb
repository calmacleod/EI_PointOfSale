<div data-search-modal-target="modal"
     class="search-modal-overlay fixed inset-0 z-[60] hidden"
     role="dialog"
     aria-modal="true"
     aria-label="Search">
  <div data-action="click->search-modal#close"
       class="fixed inset-0 bg-black/50"></div>
  <div class="fixed inset-0 flex items-start justify-center pt-[15vh] px-4 pointer-events-none">
    <div class="w-full max-w-md rounded-lg border border-theme bg-surface overflow-hidden pointer-events-auto"
         role="document">
      <%= form_with url: search_path,
          method: :get,
          data: { turbo_stream: true, search_modal_target: "form", action: "turbo:submit-end->search-modal#onResultsLoaded" },
          class: "contents" do |f| %>
        <div class="flex items-center gap-2 border-b border-theme bg-surface-alt px-2.5 py-1.5">
          <svg class="h-4 w-4 shrink-0 text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
          </svg>
          <%= f.search_field :q,
              data: { search_modal_target: "input", action: "input->search-modal#scheduleSearch" },
              autocomplete: "off",
              placeholder: "Search products, services, customers…",
              class: "flex-1 min-w-0 bg-transparent text-sm text-body placeholder:text-muted focus:outline-none",
              "aria-label": "Search query" %>
          <kbd class="hidden sm:inline-flex h-4 min-w-[1rem] items-center justify-center border border-theme px-1 text-[10px] font-medium text-muted">ESC</kbd>
        </div>
        <div id="search_results"
             data-search-modal-target="results"
             class="max-h-[min(60vh,320px)] overflow-y-auto py-1">
          <p class="px-2.5 py-4 text-center text-xs text-muted">Type to search products, services, customers, and more…</p>
        </div>
      <% end %>
      <div class="border-t border-theme bg-surface-alt px-2.5 py-1 text-[10px] text-muted">
        <span class="font-medium">Tip:</span> Press <kbd class="border border-theme px-0.5 font-mono text-[10px]">/</kbd> to open search from anywhere
      </div>
    </div>
  </div>
</div>
